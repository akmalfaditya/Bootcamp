@model FluentValidationMVC.Models.Student

@{
    ViewData["Title"] = "Create Student - FluentValidation Demo";
}

<!-- Page Header -->
<section class="bg-success text-white py-4">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-8">
                <h1 class="display-6 fw-bold mb-0">
                    <i class="fas fa-user-plus me-2"></i>Add New Student
                </h1>
                <p class="lead mb-0">Experience FluentValidation in action</p>
            </div>
            <div class="col-md-4 text-md-end">
                <a asp-action="Index" class="btn btn-light btn-lg">
                    <i class="fas fa-arrow-left me-2"></i>Back to List
                </a>
            </div>
        </div>
    </div>
</section>

<div class="container py-4">
    <!-- FluentValidation Demo Info -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="alert alert-info border-0 shadow-sm">
                <div class="row align-items-center">
                    <div class="col-md-1 text-center">
                        <i class="fas fa-info-circle fa-2x"></i>
                    </div>
                    <div class="col-md-11">
                        <h5 class="alert-heading mb-2">FluentValidation Demo</h5>
                        <p class="mb-0">
                            This form uses <strong>FluentValidation</strong> instead of Data Annotations. 
                            Try submitting with invalid data to see powerful validation in action! All validation 
                            happens both client-side (real-time) and server-side (secure).
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Form -->
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card shadow">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0">
                        <i class="fas fa-user-plus me-2"></i>Student Information
                    </h5>
                </div>
                <div class="card-body p-4">
                    <form asp-action="Create" method="post" novalidate>
                        @Html.AntiForgeryToken()
                        
                        <!-- Validation Summary -->
                        <div asp-validation-summary="ModelOnly" class="alert alert-danger d-none"></div>

                        <div class="row g-4">
                            <!-- Personal Information -->
                            <div class="col-lg-6">
                                <h6 class="text-success mb-3 fw-bold">
                                    <i class="fas fa-user me-2"></i>Personal Information
                                </h6>
                                
                                <!-- Name Field -->
                                <div class="mb-3">
                                    <label asp-for="Name" class="form-label fw-bold">
                                        Full Name <span class="text-danger">*</span>
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fas fa-user text-muted"></i>
                                        </span>
                                        <input asp-for="Name" class="form-control form-control-lg" 
                                               placeholder="Enter student's full name" />
                                    </div>
                                    <span asp-validation-for="Name" class="text-danger small"></span>
                                </div>

                                <!-- Gender Field -->
                                <div class="mb-3">
                                    <label asp-for="Gender" class="form-label fw-bold">
                                        Gender <span class="text-danger">*</span>
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fas fa-venus-mars text-muted"></i>
                                        </span>
                                        <select asp-for="Gender" class="form-select form-select-lg">
                                            <option value="">Choose gender...</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                    <span asp-validation-for="Gender" class="text-danger small"></span>
                                </div>

                                <!-- Email Field -->
                                <div class="mb-3">
                                    <label asp-for="Email" class="form-label fw-bold">
                                        Email Address <span class="text-danger">*</span>
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fas fa-envelope text-muted"></i>
                                        </span>
                                        <input asp-for="Email" type="email" class="form-control form-control-lg" 
                                               placeholder="student@university.edu" />
                                    </div>
                                    <span asp-validation-for="Email" class="text-danger small"></span>
                                    <div class="form-text">
                                        <i class="fas fa-info-circle me-1"></i>Must be a university email address
                                    </div>
                                </div>
                            </div>

                            <!-- Academic Information -->
                            <div class="col-lg-6">
                                <h6 class="text-primary mb-3 fw-bold">
                                    <i class="fas fa-graduation-cap me-2"></i>Academic Information
                                </h6>
                                
                                <!-- Branch Field -->
                                <div class="mb-3">
                                    <label asp-for="Branch" class="form-label fw-bold">
                                        Branch/Major <span class="text-danger">*</span>
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fas fa-book text-muted"></i>
                                        </span>
                                        <select asp-for="Branch" class="form-select form-select-lg">
                                            <option value="">Choose branch...</option>
                                            <option value="Computer Science">Computer Science</option>
                                            <option value="Information Technology">Information Technology</option>
                                            <option value="Software Engineering">Software Engineering</option>
                                            <option value="Engineering">Engineering</option>
                                            <option value="Business Administration">Business Administration</option>
                                            <option value="Mathematics">Mathematics</option>
                                            <option value="Physics">Physics</option>
                                            <option value="Chemistry">Chemistry</option>
                                        </select>
                                    </div>
                                    <span asp-validation-for="Branch" class="text-danger small"></span>
                                </div>

                                <!-- Section Field -->
                                <div class="mb-3">
                                    <label asp-for="Section" class="form-label fw-bold">
                                        Section <span class="text-danger">*</span>
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fas fa-layer-group text-muted"></i>
                                        </span>
                                        <select asp-for="Section" class="form-select form-select-lg">
                                            <option value="">Choose section...</option>
                                            <option value="A">Section A</option>
                                            <option value="B">Section B</option>
                                            <option value="C">Section C</option>
                                            <option value="D">Section D</option>
                                        </select>
                                    </div>
                                    <span asp-validation-for="Section" class="text-danger small"></span>
                                </div>

                                <!-- Enrollment Date Field -->
                                <div class="mb-3">
                                    <label asp-for="EnrollmentDate" class="form-label fw-bold">
                                        Enrollment Date <span class="text-danger">*</span>
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text bg-light">
                                            <i class="fas fa-calendar text-muted"></i>
                                        </span>
                                        <input asp-for="EnrollmentDate" type="date" class="form-control form-control-lg" />
                                    </div>
                                    <span asp-validation-for="EnrollmentDate" class="text-danger small"></span>
                                    <div class="form-text">
                                        <i class="fas fa-info-circle me-1"></i>Date when the student enrolled in the institution
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Form Actions -->
                        <hr class="my-4">
                        <div class="row">
                            <div class="col-12">
                                <div class="d-flex flex-column flex-sm-row gap-3 justify-content-end">
                                    <a asp-action="Index" class="btn btn-outline-secondary btn-lg">
                                        <i class="fas fa-times me-2"></i>Cancel
                                    </a>
                                    <button type="submit" class="btn btn-success btn-lg">
                                        <i class="fas fa-save me-2"></i>Create Student
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Section -->
    <div class="row mt-4">
        <div class="col-lg-10 offset-lg-1">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h6 class="mb-0">
                        <i class="fas fa-lightbulb me-2"></i>Validation Rules & Instructions
                    </h6>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6">
                            <h6 class="text-info">Required Fields:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success me-2"></i>All fields marked with <span class="text-danger fw-bold">*</span> are mandatory</li>
                                <li><i class="fas fa-check text-success me-2"></i>Name must be 2-50 characters, letters only</li>
                                <li><i class="fas fa-check text-success me-2"></i>Email must be in valid format and university domain</li>
                            </ul>
                        </div>
                        <div class="col-md-6">
                            <h6 class="text-info">Additional Rules:</h6>
                            <ul class="list-unstyled">
                                <li><i class="fas fa-check text-success me-2"></i>Enrollment date cannot be in the future</li>
                                <li><i class="fas fa-check text-success me-2"></i>Gender must be one of the provided options</li>
                                <li><i class="fas fa-check text-success me-2"></i>You can add grades after creating the student</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@* Client-side validation scripts *@
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    
    <script>
        $(document).ready(function() {
            var today = new Date().toISOString().split('T')[0];
            if (!$('#EnrollmentDate').val()) {
                $('#EnrollmentDate').val(today);
            }
            $('#EnrollmentDate').attr('max', today);
            
            $('form').on('submit', function() {
                if ($('.field-validation-error').length > 0) {
                    $('.alert-danger').show();
                    return false;
                }
            });
            
            $('#Name').on('blur', function() {
                var value = $(this).val();
                if (value) {
                    var words = value.toLowerCase().split(' ');
                    var capitalized = words.map(function(word) {
                        return word.charAt(0).toUpperCase() + word.slice(1);
                    }).join(' ');
                    $(this).val(capitalized);
                }
            });
        });
    </script>
}
